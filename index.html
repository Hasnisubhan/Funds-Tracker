<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#007bff">
  <title>My Funds Tracker</title>
  <link rel="icon" type="image/x-icon" href="icons/icon-192.ico">
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="manifest" href="manifest.json">

</head>
<Style>
/* Dropdown floating top-right */
.dropdown {
  position: fixed;
  top: 10px;
  right: 10px;
  display: inline-block;
  z-index: 9999;
}

.dropbtn {
  background: none;
  border: none;
  color: white;
  font-size: 18px;
}

.dropbtn:hover{
  background: none;
  border: none;
}

/* Dropdown (always hidden until JS toggles it) */
.dropdown-content {
  display: none;
  position: absolute;
  right: 0;
  top: 100%;
  background-color: #fff;
  min-width: 160px;
  box-shadow: 0px 8px 16px rgba(0,0,0,0.2);
  border-radius: 6px;
  z-index: 2000; /* make sure it's above header */
}

.dropdown-content a {
  color: #333;
  padding: 10px 14px;
  text-decoration: none;
  display: flex;
  align-items: center;
}

.dropdown-content a i {
  margin-right: 8px;
  color: #034ba5;
}

.dropdown-content a:hover {
  background-color: #f1f1f1;
}

.dropdown:hover .dropdown-content {
  display: block;
}
</Style>

<!-- Navbar -->
<div class="navbar">
  <!--<h2 class="logo">
    <img src="icons/logo.png" alt="Logo" class="nav-logo">
  </h2>-->
  <div class="nav-buttons">
    <button id="export-btn"><i class="fa-solid fa-file-export"></i> Exporti</button>
    <input type="file" id="import-file" accept=".json" hidden />
    <button id="import-btn"><i class="fa-solid fa-file-import"></i> Import</button>
    <button id="reset-btn"><i class="fa-solid fa-rotate-left"></i></button>
    <!-- Floating Help Button -->
  </div>
	<p id="help-btn" class="help-btn"><i class="fa-solid fa-question"></i></p>
</div>

  <!-- Right: Dropdown -->
  <div class="dropdown">
    <button class="dropbtn"><i class="fa-solid fa-ellipsis-vertical"></i></button>
    	<div class="dropdown-content">
      		<a href="setup.html"><i class="fa-solid fa-edit"></i> Edit Seetu</a>
  			<a id="exportData"><i class="fa-solid fa-file-export"></i> Export</a>
  			<a id="importData"><i class="fa-solid fa-file-import"></i> Import</a>
				<!-- Hidden file input for import -->
				<input type="file" id="importFile" accept="application/json" style="display:none;">
      			<a href="about.html"><i class="fa-solid fa-info"></i> About</a>
				<a href="#" id="resetPaymentsa"><i class="fa-solid fa-rotate-left"></i> Logout</a>
    	</div>
  </div>
<!-- About Modal -->
<div id="about-modal" class="modal">
  <div class="modal-content">
    <span class="close-btn">&times;</span>
    <h3>About Funds Tracker</h3>
	<p>
	  <strong>Funds Tracker</strong> is created and owned by <strong>Hasni</strong> and his wife <strong>Hindhuja</strong>.  
	  This app was designed to make it easier to manage savings, track funds, and maintain financial goals in everyday life.  
	</p><hr>

	<p>
	  <i class="fa-solid fa-phone"></i> <strong>Contact & Support</strong><br><br>
	  WhatsApp: <a href="https://wa.me/94784582025" target="_blank" style="color: gray;">+94 784582025</a><br>
	  Email: <a href="mailto:hasnisubhan@gmail.com" style="color: gray;">hasnisubhan@gmail.com</a>
	</p>

  </div>
</div>

<body>

  <div class="container">
    <!-- Top Total Display -->
    <div class="total-display">
      <h2>Total amount you have :</h2>
      <h1 id="total-amount">0.00 /=</h1>
    </div>



<!-- Target Goal Section -->
<div class="target-section">
  <div class="dropdown-header" id="toggle-targets">
    <h2><i class="fa-solid fa-bullseye"></i> Saving Targets</h2>
    <i class="fas fa-chevron-down"></i>
  </div>

  <div id="targets-section" class="dropdown-content">
    <div id="target-list"></div>

    <div id="target-form">
      <input type="number" id="target-input" placeholder="Enter target amount" />
      <button id="set-target-btn">Add Target</button>
    </div>
  </div>
</div>


    <!-- Transaction List -->
    <div class="transaction-list">
      <table>
		<thead>
		  <tr>
		    <th>Date & Time</th>
		    <th>Note</th>
		    <th>Funds</th>
		  </tr>
		</thead>

        <tbody id="transaction-table-body"></tbody>
      </table>
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <input type="text" id="note-input" placeholder="Enter Note">
      <input type="number" id="amount-input" placeholder="Enter Amount">

    <label class="loan-option"><input type="checkbox" id="loan-checkbox"> Loan</label>
<div class="date-wrapper">
  <input type="date" id="due-date" disabled>
  <i class="fa-solid fa-calendar-days calendar-icon"></i>
</div>



      <button id="income-btn">Income</button>
      <button id="outgoing-btn">Outgoing</button>
    </div>
  </div>

  <!-- Modal for full note -->
  <div id="note-modal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h3>Full Note</h3>
      <p id="modal-note-text"></p>
    </div>
  </div>


  <script src="JS/script.js"></script>
  <script src="JS/target.js"></script>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js");
  }
</script>
<script>
  // --- Export Data ---
  document.getElementById("exportData")?.addEventListener("click", () => {
    const plan = JSON.parse(localStorage.getItem("plan")) || {};
    const members = JSON.parse(localStorage.getItem("members")) || [];
    const payments = JSON.parse(localStorage.getItem("payments")) || {};

    const data = { plan, members, payments };
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });

    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "seetu-data.json";
    link.click();
  });

</script>
<script>
	  // --- Import Data ---
  document.getElementById("importData")?.addEventListener("click", () => {
    document.getElementById("importFile").click();
  });

  document.getElementById("importFile")?.addEventListener("change", (event) => {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const data = JSON.parse(e.target.result);
        if (data.plan && data.members && data.payments !== undefined) {
          localStorage.setItem("plan", JSON.stringify(data.plan));
          localStorage.setItem("members", JSON.stringify(data.members));
          localStorage.setItem("payments", JSON.stringify(data.payments));
          alert("Data imported successfully!");
          location.reload();
        } else {
          alert("Invalid file format.");
        }
      } catch {
        alert("Error reading file.");
      }
    };
    reader.readAsText(file);
  });
</script>
	<script>
		  document.getElementById("resetPaymentsa")?.addEventListener("click", (e) => {
    e.preventDefault(); // prevent page jump

    if (confirm("Are you sure you want to logout?")) {
      // Clear all localStorage data for a fresh login
      localStorage.clear();

      // Redirect back to login page
      window.location.href = "auth.html";
    }
  });
	</script>

	<script>
		<script>
  const dropBtn = document.querySelector(".dropbtn");
  const dropdownContent = document.querySelector(".dropdown-content");

  dropBtn.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdownContent.style.display =
      dropdownContent.style.display === "block" ? "none" : "block";
  });

  document.addEventListener("click", () => {
    dropdownContent.style.display = "none";
  });
</script>
<script>
  document.getElementById("viewSeettuBtn").addEventListener("click", () => {
    window.location.href = "list.html";
  });
</script>
	</script>
</body>
</html>










